<!DOCTYPE html>
<html>
<head>
    <title>Overview</title>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/styles.css' %}">
    <style>   
        .account-details, .group-project {
            padding: 0px 0px;
        }
        .logout-button:hover {
            background-color: #d21d1d;
        }
        .description {
            font-size: small;
            color: rgb(78, 78, 78);
        }
        .group-project h3, .account-details h3 {
            background-color: #585858;
            color: white;
            padding: 5px;
            border-radius: 2px;
            border: 1px solid #ffffff;

        }
        .button1 {
            padding: 6px 10px;
            background-color: #292929;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
        }
        .button1:hover {
            background-color: #585858;
        }
        .logout-button {
            padding: 6.5px 9px; 
            font-size: medium;
            background-color: #ff0000;
            border: none;
            border-radius: 2px;
            cursor: pointer;
        }
        .username {
            font-weight: bold;
            font-style: normal;
            color: #ffffff;
            padding-right: 20px;
            font-size: larger;
        }
        .top-right {
            position: absolute;
            top: 10px;
            right: 20px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        body {
            font-family: Arial, sans-serif;
            background-color: #930e0e;
            margin: 0;
            padding: 0;
        }
        .container {
            padding: 20px;
        }
        select {
            padding: 8px;
            border-radius: 4px;
            border: 1px solid #ccc;
            margin-bottom: 20px;
        }
        h2 {
            color: #000000;
        }
        .section ul {
            list-style: none;
            padding: 0;
        }
        .section li {
            padding: 5px;
            border-radius: 1px;
            background-color: #ffffff;
        }

        .custom-dropdown {
            width: 150px; /* Adjust to your preferred width */
        }
    
        .custom-button {
            width: 80px;
            height: 25px;
        }
    
        form {
            display: flex;
            align-items: center;
            gap: 10px; 
        }
    

    </style>
</head>
<body>
    <div class="top-right">
        <span class="username">Welcome to CS4273, {{ user.name }}</span>
        <form method="post" action="{% url 'logout' %}" style="display: inline;">
            {% csrf_token %}
            <button type="submit" class="logout-button">Log Out</button>
        </form>
    </div>
    <div class="container">
        <div class="account-details">
            <h2>Account Details</h2>
            <p><strong>Name:</strong> {{ user.name }}</p>
            <p><strong>Group:</strong> {{ user.group_name }}</p>
        </div>

        <div class="group-project">
            <h2>Group Progress</h2>

            <!-- Dropdown for sprint selection -->
            <form method="get" action="{% url 'mentor_page' %}" style="display: inline-block;">
                <select id="sprint" name="sprint" class="custom-dropdown">
                    <option value="">All Tickets</option>
                    <option value="S1" {% if sprint == 'S1' %}selected{% endif %}>Sprint 1</option>
                    <option value="S2" {% if sprint == 'S2' %}selected{% endif %}>Sprint 2</option>
                    <option value="S3" {% if sprint == 'S3' %}selected{% endif %}>Sprint 3</option>
                    <option value="S4" {% if sprint == 'S4' %}selected{% endif %}>Sprint 4</option>
                </select>
                <button type="submit" class="button1 custom-button">Filter</button>
            </form>
                        </form>

            <div class="section">
                <h3>To Do</h3>
                <ul>
                    {% for task in tasks_to_do %}
                        <li>
                            <strong>{{ task.title }}</strong> - {{ task.description }} ({{ task.user.name }})
                        </li>
                    {% empty %}
                        <li>No ticket to do.</li>
                    {% endfor %}
                </ul>
            </div>

            <div class="section">
                <h3>Doing</h3>
                <ul>
                    {% for task in tasks_doing %}
                        <li>
                            <strong>{{ task.title }}</strong> - {{ task.description }} ({{ task.user.name }})
                            <p class="description"><strong>Risk Management:</strong> {{ task.risk_management }}</p>
                        </li>
                    {% empty %}
                        <li>No ticket in progress.</li>
                    {% endfor %}
                </ul>
            </div>

            <div class="section">
                <h3>Done</h3>
                <ul>
                    {% for task in tasks_done %}
                        <li>
                            <strong>{{ task.title }}</strong> - {{ task.description }} ({{ task.user.name }})
                            <p class="description"><strong>Risk Management:</strong> {{ task.risk_management }}</p>
                            <p class="description"><strong>Challenges:</strong> {{ task.challenges }}</p>
                            <p class="description"><strong>Lesson Learned:</strong> {{ task.lesson_learned }}</p>
                        </li>
                    {% empty %}
                        <li>No ticket completed.</li>
                    {% endfor %}
                </ul>
            </div>
            
            <button onclick="window.print()" class="button1">Print Report</button>
        </div>
    </div>
</body>
</html>
